{%- if section.settings.text != blank -%}
  {%- render 'section-spacing-collapsing' -%}

  <style>
    #shopify-section-{{ section.id }} {
      --section-spacing-inline: 0;
      --scrolling-text-font-size: {% if section.settings.text_size == 'xsmall' %}0.9rem{% elsif section.settings.text_size == 'small' %}1.5rem{% elsif section.settings.text_size == 'medium' %}2.5rem{% elsif section.settings.text_size == 'large' %}3rem{% else %}4rem{% endif %};
    }

    @media screen and (min-width: 700px) {
      #shopify-section-{{ section.id }} {
        --scrolling-text-font-size: {% if section.settings.text_size == 'xsmall' %}1rem{% elsif section.settings.text_size == 'small' %}2rem{% elsif section.settings.text_size == 'medium' %}3rem{% elsif section.settings.text_size == 'large' %}4rem{% else %}5rem{% endif %};
      }
    }

    /* TEXTE : Regular + centrage vertical */
    #shopify-section-{{ section.id }} .scrolling-text__text {
      font-weight: 400;
      line-height: 1;
      display: inline-block;
      vertical-align: middle;
      color: {{ section.settings.text_color }};
    }

    /* Séparateur spacing */
    #shopify-section-{{ section.id }} .scrolling-text__text.separator {
      margin: 0 0.5rem;
    }

    /* Réduction des bords / marges verticales */
    #shopify-section-{{ section.id }} .section {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }
  </style>

  {%- if section.settings.text_size == 'xsmall' -%}
    {%- assign is_tight = true -%}
  {%- endif -%}

  <div {% render 'section-properties', tight: is_tight %}>
    {%- capture section_content -%}
      {%- assign phrases = section.settings.text | split: "•" -%}
      {%- for phrase in phrases -%}
        <span class="scrolling-text__text heading" {% unless forloop.first %}aria-hidden="true"{% endunless %}>
          {{ phrase | strip }}
        </span>
        {% unless forloop.last %}
          <span class="scrolling-text__text separator" aria-hidden="true">•</span>
        {% endunless %}
      {%- endfor -%}
    {%- endcapture -%}

    <div class="scrolling-text {% if section.settings.scrolling_mode == 'scroll' %}scrolling-text--scroll{% else %}scrolling-text--auto{% endif %}">
      {%- if section.settings.scrolling_mode == 'scroll' -%}
        <scrolling-text class="scrolling-text__wrapper">
          {{- section_content -}}
        </scrolling-text>
      {%- else -%}
        <marquee-text scrolling-speed="{{ section.settings.scrolling_speed }}" class="scrolling-text__wrapper">
          {{- section_content -}}
        </marquee-text>
      {%- endif -%}
    </div>
  </div>
{%- endif -%}
