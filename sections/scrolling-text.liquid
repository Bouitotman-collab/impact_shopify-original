{%- if section.settings.text != blank -%}

<style>
  /* Container full-width, hauteur comme l'annonce bar */
  #shopify-section-{{ section.id }} {
    width: 100vw;
    position: relative;
    left: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    height: 3rem;          /* hauteur identique à l’annonce bar */
    overflow: hidden;
    background: {% if section.settings.background_gradient != blank %}{{ section.settings.background_gradient }}{% else %}{{ section.settings.background | default: '#000' }}{% endif %};
    display: flex;
    align-items: center;
  }

  /* Wrapper pour le texte défilant */
  #shopify-section-{{ section.id }} .scrolling-text-wrapper {
    display: inline-block;
    white-space: nowrap;
    animation: scroll-left 20s linear infinite; /* vitesse du scroll, modifiable */
  }

  /* Chaque texte */
  #shopify-section-{{ section.id }} .scrolling-text-wrapper span {
    color: {% if section.settings.text_gradient != blank %}{{ section.settings.text_gradient }}{% else %}#F8F7F2{% endif %};
    font-weight: 400;
    margin-right: 2rem; /* espace entre répétitions */
    font-size: {% if section.settings.text_size == 'xsmall' %}1.125rem{% elsif section.settings.text_size == 'small' %}2.5rem{% elsif section.settings.text_size == 'medium' %}3.75rem{% elsif section.settings.text_size == 'large' %}5rem{% else %}7.5rem{% endif %};
  }

  @keyframes scroll-left {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }

  @media screen and (min-width: 700px) {
    #shopify-section-{{ section.id }} .scrolling-text-wrapper span {
      font-size: {% if section.settings.text_size == 'xsmall' %}1.5rem{% elsif section.settings.text_size == 'small' %}3.75rem{% elsif section.settings.text_size == 'medium' %}5rem{% elsif section.settings.text_size == 'large' %}8.75rem{% else %}12.5rem{% endif %};
    }
  }
</style>

<div {% render 'section-properties' %}>
  <div class="scrolling-text-wrapper">
    {%- for i in (1..20) -%} {# répète plusieurs fois pour un scroll continu #}
      <span>
        {{ section.settings.text }}
      </span>
    {%- endfor -%}
  </div>
</div>

{%- endif -%}

{% schema %}
{
  "name": "Scrolling Text Custom",
  "settings": [
    {
      "type": "text",
      "id": "text",
      "label": "Text",
      "default": "Promotion text"
    },
    {
      "type": "select",
      "id": "text_size",
      "label": "Text size",
      "options": [
        {"value": "xsmall","label": "X-Small"},
        {"value": "small","label": "Small"},
        {"value": "medium","label": "Medium"},
        {"value": "large","label": "Large"},
        {"value": "xlarge","label": "X-Large"}
      ],
      "default": "large"
    },
    {
      "type": "color_background",
      "id": "background_gradient",
      "label": "Background Gradient"
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background"
    },
    {
      "type": "color_background",
      "id": "text_gradient",
      "label": "Text Gradient"
    }
  ],
  "presets": [{"name": "Scrolling Text Custom"}]
}
{% endschema %}
