{% comment %}
SECTION : Tous les avis clients – Metaobjects (review)
{% endcomment %}

{% assign reviews = shop.metaobjects.review.values %}

<div class="all-reviews" id="tous-les-avis">
  <div class="all-reviews-container">

    <h2 class="all-reviews-title">
      Tous les avis clients
    </h2>

    <p class="all-reviews-subtitle">
      {{ reviews.size }} avis laissés par plus de {{ section.settings.total_customers }} clients
    </p>

    {% if reviews.size > 0 %}
      <div class="all-reviews-list">
        {% for review in reviews %}
          <div class="all-review-item">

            <!-- ÉTOILES -->
            <div class="all-review-stars">
              {% for i in (1..5) %}
                {% if i <= review.note.value %}
                  ★
                {% else %}
                  ☆
                {% endif %}
              {% endfor %}
            </div>

            <!-- TEXTE AVIS -->
            <p class="all-review-text">
              {{ review.avis.value }}
            </p>

            <!-- FOOTER -->
            <div class="all-review-footer">
              <strong>{{ review.nom.value }}</strong>

              {% if review.achat_verifie.value %}
                <span class="verified">✔ Achat vérifié</span>
              {% endif %}
            </div>

          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="no-reviews">
        Aucun avis pour le moment.
      </p>
    {% endif %}

  </div>
</div>

<style>
.all-reviews {
  padding: 48px 0;
  background: #fafafa;
}

.all-reviews-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 0 20px;
}

.all-reviews-title {
  text-align: center;
  font-size: 30px;
  margin-bottom: 10px;
}

.all-reviews-subtitle {
  text-align: center;
  font-size: 15px;
  color: #666;
  margin-bottom: 40px;
}

.all-reviews-list {
  display: flex;
  flex-direction: column;
  gap: 22px;
}

.all-review-item {
  background: #fff;
  border: 1px solid #e5e5e5;
  border-radius: 14px;
  padding: 22px;
}

.all-review-stars {
  color: #FFD700;
  font-size: 18px;
  margin-bottom: 10px;
  letter-spacing: 2px;
}

.all-review-text {
  font-size: 15px;
  line-height: 1.6;
  color: #333;
  margin-bottom: 12px;
}

.all-review-footer {
  font-size: 14px;
  color: #555;
}

.verified {
  color: #00A651;
  font-size: 12px;
  margin-left: 6px;
}

.no-reviews {
  text-align: center;
  color: #999;
  font-size: 14px;
}
</style>

{% schema %}
{
  "name": "Tous les avis clients",
  "settings": [
    {
      "type": "number",
      "id": "total_customers",
      "label": "Nombre total de clients",
      "default": 1800
    }
  ],
  "presets": [
    {
      "name": "Tous les avis clients"
    }
  ]
}
{% endschema %}
