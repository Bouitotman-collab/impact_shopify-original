{% comment %}
SECTION : Tous les avis clients – Sans limite
{% endcomment %}

<div class="all-reviews" id="tous-les-avis">
  <div class="all-reviews-container">

    <h2 class="all-reviews-title">Tous les avis clients</h2>

    <p class="all-reviews-subtitle" id="reviewCount">
      50 avis laissés par plus de {{ section.settings.total_customers }} clients
    </p>

    <div class="all-reviews-list" id="reviewsList"></div>

    <div class="load-more-container" id="loadMoreContainer" style="display:none;">
      <button class="load-more-btn" id="loadMoreReviews">
        Charger plus
      </button>
    </div>

  </div>
</div>

<style>
.all-reviews{padding:48px 0;background:#fafafa}
.all-reviews-container{max-width:900px;margin:auto;padding:0 20px}
.all-reviews-title{text-align:center;font-size:30px;margin-bottom:10px}
.all-reviews-subtitle{text-align:center;font-size:15px;color:#666;margin-bottom:40px}

.all-reviews-list{
  display:flex;
  flex-direction:column;
  gap:22px;
}

.all-review-item{
  background:#fff;
  border:1px solid #e5e5e5;
  border-radius:14px;
  padding:22px;
}

.all-review-stars{color:#FFD700;font-size:18px;margin-bottom:10px}
.all-review-text{font-size:15px;line-height:1.6;margin-bottom:12px}
.all-review-footer{font-size:14px;color:#555}
.verified{color:#00A651;font-size:12px;margin-left:6px}

.load-more-container{text-align:center;margin-top:40px}
.load-more-btn{
  padding:12px 30px;
  border:2px solid #000;
  border-radius:8px;
  background:#fff;
  font-weight:600;
  cursor:pointer;
}
</style>

<script>
(function() {
  const allReviews = [
    { "nom": "Fanny P.", "avis": "J'ai un chien et je lave très souvent ses couvertures. Mon lave-linge avait fini par garder une mauvaise odeur. Après une tablette, la machine est redevenue propre et fraîche. Très satisfaite.", "note": 5, "achat_verifie": true },
    { "nom": "Sandrine M.", "avis": "Résultat correct sur les résidus.", "note": 4, "achat_verifie": true },
    { "nom": "Benoît F.", "avis": "Les poils sont moins présents après nettoyage.", "note": 4, "achat_verifie": true },
    { "nom": "Isabelle T.", "avis": "Nettoie bien la machine, bon produit.", "note": 4, "achat_verifie": true },
    { "nom": "Thomas V.", "avis": "Bon entretien, fait le travail.", "note": 4, "achat_verifie": true },
    { "nom": "Philippe R.", "avis": "Produit efficace, mais il faut être régulier.", "note": 4, "achat_verifie": true },
    { "nom": "Laura C.", "avis": "Les odeurs ont diminué, résultat satisfaisant.", "note": 4, "achat_verifie": true },
    { "nom": "Vincent G.", "avis": "Bon entretien pour prévenir les pannes.", "note": 5, "achat_verifie": true },
    { "nom": "Camille S.", "avis": "Utilisation simple, résultat visible.", "note": 5, "achat_verifie": true },
    { "nom": "Pierre D.", "avis": "Lave-linge plus propre après chaque cycle.", "note": 5, "achat_verifie": true },
    { "nom": "Élodie V.", "avis": "Très efficace sur les résidus.", "note": 5, "achat_verifie": true },
    { "nom": "Adrien T.", "avis": "Les poils ne bouchent plus le filtre.", "note": 5, "achat_verifie": true },
    { "nom": "Sophie R.", "avis": "Bon nettoyage sans effort.", "note": 5, "achat_verifie": true },
    { "nom": "Loïc M.", "avis": "La machine fonctionne mieux.", "note": 5, "achat_verifie": true },
    { "nom": "Karine L.", "avis": "Les dépôts sont bien éliminés.", "note": 5, "achat_verifie": true },
    { "nom": "Julien P.", "avis": "Plus aucun souci d'odeur.", "note": 5, "achat_verifie": true },
    { "nom": "Clémentine A.", "avis": "Le tambour est bien nettoyé.", "note": 5, "achat_verifie": true },
    { "nom": "Romain B.", "avis": "Très utile avec des animaux à la maison.", "note": 5, "achat_verifie": true },
    { "nom": "Mathilde S.", "avis": "La machine reste saine plus longtemps.", "note": 5, "achat_verifie": true },
    { "nom": "Denis F.", "avis": "Bon produit pour l'entretien mensuel.", "note": 5, "achat_verifie": true },
    { "nom": "Laure V.", "avis": "Résultat propre et sans odeur.", "note": 5, "achat_verifie": true },
    { "nom": "Rémi C.", "avis": "Les poils sont bien dissous.", "note": 5, "achat_verifie": true },
    { "nom": "Pauline J.", "avis": "La machine est plus propre visuellement.", "note": 5, "achat_verifie": true },
    { "nom": "Sébastien H.", "avis": "Très bon entretien pour lave-linge.", "note": 5, "achat_verifie": true },
    { "nom": "Anaïs D.", "avis": "Les odeurs ont complètement disparu.", "note": 5, "achat_verifie": true },
    { "nom": "Olivier N.", "avis": "Le filtre est beaucoup moins encrassé.", "note": 5, "achat_verifie": true },
    { "nom": "Vanessa G.", "avis": "Efficace sur les résidus et odeurs.", "note": 5, "achat_verifie": true },
    { "nom": "Thibault R.", "avis": "La machine sent propre après chaque cycle.", "note": 5, "achat_verifie": true },
    { "nom": "Corinne M.", "avis": "Bon nettoyage en profondeur.", "note": 5, "achat_verifie": true },
    { "nom": "Damien L.", "avis": "Les poils sont mieux éliminés.", "note": 5, "achat_verifie": true },
    { "nom": "Laurence B.", "avis": "Très pratique pour l'entretien régulier.", "note": 5, "achat_verifie": true },
    { "nom": "Maxime D.", "avis": "La machine semble plus saine.", "note": 5, "achat_verifie": true },
    { "nom": "Élise P.", "avis": "Plus d'odeur après lavage des textiles animaux.", "note": 5, "achat_verifie": true },
    { "nom": "Frédéric S.", "avis": "Le lave-linge reste propre plus longtemps.", "note": 5, "achat_verifie": true },
    { "nom": "Noémie F.", "avis": "La saleté incrustée est bien décollée.", "note": 5, "achat_verifie": true },
    { "nom": "Pascal T.", "avis": "Bon produit pour protéger la machine.", "note": 5, "achat_verifie": true },
    { "nom": "Julie R.", "avis": "Résultat visible dès le premier cycle.", "note": 5, "achat_verifie": true },
    { "nom": "Yann M.", "avis": "Les poils ne s'accumulent plus comme avant.", "note": 5, "achat_verifie": true },
    { "nom": "Sandrine V.", "avis": "Très bon entretien pour éviter les bouchons.", "note": 5, "achat_verifie": true },
    { "nom": "Hugo C.", "avis": "La machine est plus fraîche après utilisation.", "note": 5, "achat_verifie": true },
    { "nom": "Claire H.", "avis": "Le linge ressort sans odeur désagréable.", "note": 5, "achat_verifie": true },
    { "nom": "Michel D.", "avis": "Les résidus de saleté sont bien éliminés.", "note": 5, "achat_verifie": true },
    { "nom": "Aurore P.", "avis": "Je l'utilise régulièrement, aucun souci depuis.", "note": 5, "achat_verifie": true },
    { "nom": "Fabien N.", "avis": "Le tambour est bien assaini.", "note": 5, "achat_verifie": true },
    { "nom": "Marion L.", "avis": "Très efficace après plusieurs lavages de linge animal.", "note": 5, "achat_verifie": true },
    { "nom": "Thierry F.", "avis": "Les filtres restent plus propres.", "note": 5, "achat_verifie": true },
    { "nom": "Sophie T.", "avis": "Les odeurs incrustées ont disparu.", "note": 5, "achat_verifie": true },
    { "nom": "Laurent G.", "avis": "Bon entretien mensuel pour le lave-linge.", "note": 5, "achat_verifie": true },
    { "nom": "Céline B.", "avis": "La machine est plus propre et fonctionne mieux.", "note": 5, "achat_verifie": true }
  ];

  const container = document.getElementById('reviewsList');
  const loadMoreBtn = document.getElementById('loadMoreContainer');
  let visible = 12;

  function renderStars(note) {
    let stars = '';
    for (let i = 1; i <= 5; i++) {
      stars += i <= note ? '★' : '☆';
    }
    return stars;
  }

  function renderReviews() {
    container.innerHTML = '';
    
    allReviews.slice(0, visible).forEach(review => {
      const div = document.createElement('div');
      div.className = 'all-review-item';
      
      div.innerHTML = `
        <div class="all-review-stars">
          ${renderStars(review.note)}
        </div>
        <p class="all-review-text">
          ${review.avis}
        </p>
        <div class="all-review-footer">
          <strong>${review.nom}</strong>
          ${review.achat_verifie ? '<span class="verified">✔ Achat vérifié</span>' : ''}
        </div>
      `;
      
      container.appendChild(div);
    });

    if (visible < allReviews.length) {
      loadMoreBtn.style.display = 'block';
    } else {
      loadMoreBtn.style.display = 'none';
    }
  }

  document.getElementById('loadMoreReviews').addEventListener('click', () => {
    visible += 12;
    renderReviews();
  });

  renderReviews();
})();
</script>

{% schema %}
{
  "name": "Tous les avis clients",
  "settings": [
    {
      "type": "number",
      "id": "total_customers",
      "label": "Nombre total de clients",
      "default": 1800
    }
  ],
  "presets": [
    {
      "name": "Tous les avis clients"
    }
  ]
}
{% endschema %}