{% comment %}
SECTION : Tous les avis clients – via Metaobjects (illimité)
{% endcomment %}

{% assign reviews = shop.metaobjects.review.values %}

<div class="all-reviews" id="tous-les-avis">
  <div class="all-reviews-container">

    <h2 class="all-reviews-title">
      Tous les avis clients
    </h2>

    <p class="all-reviews-subtitle">
      {{ reviews.size }} avis laissés par plus de
      {{ section.settings.total_customers }} clients
    </p>

    {% if reviews.size > 0 %}
      <div class="all-reviews-list">
        {% for review in reviews %}
          <div class="all-review-item">

            <div class="all-review-stars">
              {% for i in (1..5) %}
                {% if i <= review.rating.value %}★{% else %}☆{% endif %}
              {% endfor %}
            </div>

            <p class="all-review-text">
              {{ review.content.value }}
            </p>

            <div class="all-review-footer">
              <strong>{{ review.name.value }}</strong>
              {% if review.verified.value %}
                <span class="verified">✔ Achat vérifié</span>
              {% endif %}
            </div>

          </div>
        {% endfor %}
      </div>
    {% else %}
      <p style="text-align:center;color:#999;">
        Aucun avis pour le moment.
      </p>
    {% endif %}

  </div>
</div>

<style>
.all-reviews{
  padding:40px 0;
  background:#fafafa;
}

.all-reviews-container{
  max-width:900px;
  margin:auto;
  padding:0 20px;
}

.all-reviews-title{
  text-align:center;
  font-size:30px;
  margin-bottom:12px;
}

.all-reviews-subtitle{
  text-align:center;
  font-size:15px;
  color:#666;
  margin-bottom:40px;
}

.all-reviews-list{
  display:flex;
  flex-direction:column;
  gap:24px;
}

.all-review-item{
  border:1px solid #e5e5e5;
  border-radius:12px;
  padding:24px;
  background:#fff;
}

.all-review-stars{
  color:#FFD700;
  font-size:18px;
  margin-bottom:10px;
}

.all-review-text{
  font-size:15px;
  line-height:1.6;
  margin-bottom:12px;
  color:#333;
}

.all-review-footer{
  font-size:14px;
  color:#555;
}

.verified{
  color:#00A651;
  font-size:12px;
  margin-left:6px;
}
</style>

{% schema %}
{
  "name": "Tous les avis clients",
  "settings": [
    {
      "type": "number",
      "id": "total_customers",
      "label": "Nombre total de clients",
      "default": 1800
    }
  ],
  "presets": [
    {
      "name": "Tous les avis clients"
    }
  ]
}
{% endschema %}
